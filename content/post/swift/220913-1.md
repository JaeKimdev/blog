---
title: "Protocols"
date: 2022-09-12T18:11:48+08:00

categories:
  - Dev
  -  #Review

tags:
  - swift
  - Protocol

image: https://res.cloudinary.com/dwrejmale/image/upload/v1658929900/swift_dpaoqx.png #the-creative-exchange-d2zvqp3fpro-unsplash.jpg
---

## Protocols

> A protocol defines a blueprint of methods, properties, and other requirements that suit a particular task or piece of functionality. The protocol can then be adopted by a class, structure, or enumeration to provide an actual implementation of those requirements.

íŠ¹ì • ìž‘ì—…ì´ë‚˜ ê¸°ëŠ¥ì— ì í•©í•œ ë©”ì†Œë“œ, í”„ë¡œí¼í‹°ì˜ ì²­ì‚¬ì§„  
êµ¬ì¡°ì²´, í´ëž˜ìŠ¤, ì—´ê±°í˜•ì—ì„œ í”„ë¡œí† ì½œì„ ì±„íƒ(Adopted)í•˜ì—¬ ì‚¬ìš©ê°€ëŠ¥  
ì¶”ê°€ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ protocol extensionë„ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.

## Protocol Sysntax

```swift
protocol ProtocolName {
    // protocol definition goes here
}
```

ì—¬ëŸ¬ê°œì˜ í”„ë¡œí† ì½œì„ ì±„íƒí•  ìˆ˜ë„ ìžˆë‹¤.

```swift
struct SomeStructure: ProtocolName, AnotherProtocol {
    // protocol definition goes here
}
```

í´ëž˜ìŠ¤ê°€ ë‹¤ë¥¸ í´ëž˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” ê²½ìš°ì—ëŠ” ë¶€ëª¨ í´ëž˜ìŠ¤ë¥¼ ë¨¼ì € ì ê³ , ê·¸ ë‹¤ìŒì— í”„ë¡œí† ì½œì„ ì ëŠ”ë‹¤.

```swift
class SomeClass: Superclass, FirstProtocol, AnotherProtocol {
    // class definition goes here
}
```

## Property Requirements

í”„ë¡œí† ì½œì—ì„œëŠ” í”„ë¡œí¼í‹°ê°€ ì €ìž¥ í”„ë¡œí¼í‹°ì¸ì§€ ì—°ì‚° í”„ë¡œí¼í‹°ì¸ì§€ ëª…ì‹œí•˜ì§€ ì•Šê³  ì´ë¦„ê³¼ íƒ€ìž… ê·¸ë¦¬ê³  gettable, settableí•œì§€ ëª…ì‹œí•œë‹¤.

í”„ë¡œí¼í‹°ëŠ” í•­ìƒ `var`ë¡œ ì„ ì–¸í•´ì£¼ì–´ì•¼ í•œë‹¤.

```swift
protocol SomeProtocol {
    var mustBeSettable: Int { get set }
    var doesNotNeedToBeSettable: Int { get }
}
```

`static`ì ‘ë‘ì‚¬ë¥¼ ë¶™ì—¬ì„œ íƒ€ìž… í”„ë¡œí¼í‹°ë¡œ ì„ ì–¸í•  ìˆ˜ ìžˆë‹¤.

```swift
protocol AnotherProtocol {
    static var someTypeProperty: Int { get set }
}
```

### ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ Property ì˜ˆì œ

```swift
// nameì´ë¼ëŠ” í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ê³  ìžˆëŠ” í”„ë¡œí† ì½œ êµ¬í˜„, ì½ê¸°ë§Œ ê°€ëŠ¥í•´ë„ ìƒê´€ì—†ìŒ(ì½ê¸°, ì“°ê¸° ê°€ëŠ¥í•´ë„ ë¨)
protocol FullyNamed {
    var fullName: String { get }
}

// Person êµ¬ì¡°ì²´ëŠ” FullyNamed í”„ë¡œí† ì½œì„ ì±„íƒ
struct Person: FullyNamed {
    var fullName: String
}

let john = Person(fullName: "John Appleseed")
// john.fullName is "John Appleseed"

// FullyNamed í”„ë¡œí† ì½œì„ ì±„íƒí•œ ì¡°ê¸ˆ ë” ë³µìž¡í•œ Starship í´ëž˜ìŠ¤
class Starship: FullyNamed {
    var prefix: String?
    var name: String

    init(name: String, prefix: String? = nil) {
        self.name = name
        self.prefix = prefix
    }

    var fullName: String {
        return (prefix != nil ? prefix! + " " : "") + name
    }
}
var ncc1701 = Starship(name: "Enterprise", prefix: "USS")
// ncc1701.fullName is "USS Enterprise"
```

## Method Requirements

í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ê¸° ìœ„í•´ íŠ¹ì • ë©”ì†Œë“œ í˜¹ì€ íƒ€ìž… ë©”ì†Œë“œë¥¼ ìš”êµ¬í•  ìˆ˜ ìžˆë‹¤.  
í”„ë¡œí† ì½œì€ êµ¬í˜„ì„ í•˜ì§€ ì•ŠëŠ” `ìš”êµ¬ì‚¬í•­`ì´ë¯€ë¡œ `{ }` ì½”ë“œ í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  í•¨ìˆ˜ ì´ë¦„ê³¼ ë§¤ê°œë³€ìˆ˜, ë°˜í™˜ íƒ€ìž…ë§Œ ëª…ì‹œí•œë‹¤.  
íƒ€ìž… ë©”ì†Œë“œì˜ ê²½ìš° `static` ì ‘ë‘ì‚¬ë¥¼ ë¶™ì—¬ì„œ ëª…ì‹œí•œë‹¤.

### Syntax

```swift
protocol SomeProtocol {
    static func someTypeMethod()
}
```

```swift
// RandomNumberGenerator í”„ë¡œí† ì½œ êµ¬í˜„
protocol RandomNumberGenerator {
    func random() -> Double
}

// LinearCongruentialGenerator êµ¬ì¡°ì²´ëŠ” RandomNumberGenerator í”„ë¡œí† ì½œì„ ì±„íƒ
// ë‚´ë¶€ì— DOubleì„ ë°˜í™˜í•˜ëŠ” random() ë©”ì†Œë“œë¥¼ êµ¬í˜„í•´ì£¼ë©´ ëœë‹¤
class LinearCongruentialGenerator: RandomNumberGenerator {
    var lastRandom = 42.0
    let m = 139968.0
    let a = 3877.0
    let c = 29573.0

    func random() -> Double {
        lastRandom = ((lastRandom * a + c)
            .truncatingRemainder(dividingBy:m))
        return lastRandom / m
    }
}

let generator = LinearCongruentialGenerator()

print("Here's a random number: \(generator.random())")
// Prints "Here's a random number: 0.3746499199817101"
print("And another one: \(generator.random())")
// Prints "And another one: 0.729023776863283"
```

### Mutating Method Requirements

ê°’ íƒ€ìž…(êµ¬ì¡°ì²´, ì—´ê±°í˜•)ì—ì„œ ë©”ì†Œë“œë¥¼ êµ¬í˜„í•  ë•ŒëŠ” ë©”ì†Œë“œ ì•žì— `mutating` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

## Initializer Requirements

í”„ë¡œí† ì½œ êµ¬í˜„ ì‹œ, íŠ¹ì • ì´ë‹ˆì…œë¼ì´ì €ë¥¼ ìš”êµ¬í•  ìˆ˜ ìžˆë‹¤.  
ë©”ì†Œë“œì™€ ë§ˆì°¬ê°€ì§€ë¡œ `êµ¬í˜„ë¶€ëŠ” ìž‘ì„±í•˜ì§€ ì•ŠëŠ”ë‹¤`

```swift
protocol SomeProtocol {
    init(someParameter: Int)
}
```

### Class Implementations of Protocol Initializer Requirements í”„ë¡œí† ì½œì„ ì±„íƒí•œ Classì˜ ì´ë‹ˆì…œë¼ì´ì € êµ¬í˜„

í´ëž˜ìŠ¤ì—ì„œ í”„ë¡œí† ì½œì„ ì±„íƒí•œ ê²½ìš°, ì´ë‹ˆì…œë¼ì´ì €ë¥¼ êµ¬í˜„í•  ë•ŒëŠ” `required` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

```swift
lass SomeClass: SomeProtocol {
    required init(someParameter: Int) {
        // initializer implementation goes here
    }
}
```

`SomeClass`ë¥¼ ìƒì†ë°›ëŠ” í´ëž˜ìŠ¤ì—ì„œë„ í•´ë‹¹ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
ë”°ë¼ì„œ SomeClassê°€ ìƒì†ë°›ì„ ê³³ì´ ì—†ëŠ” ìµœì¢… í´ëž˜ìŠ¤ë¼ë©´ `required` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

ìžì‹ í´ëž˜ìŠ¤ê°€ ë¶€ëª¨ í´ëž˜ìŠ¤ì˜ ì§€ì •ëœ ì´ˆê¸°í™”ë¥¼ ìž¬ì •ì˜í•˜ê³  í”„ë¡œí† ì½œì˜ ì´ë‹ˆì…œë¼ì´ì €ë„ êµ¬í˜„í•´ì•¼í•˜ëŠ” ê²½ìš° `required override init`ì„ ì‚¬ìš©í•œë‹¤. ðŸ˜…

```swift
protocol SomeProtocol {
    init()
}

class SomeSuperClass {
    init() {
        // initializer implementation goes here
    }
}

class SomeSubClass: SomeSuperClass, SomeProtocol {
    // "required" from SomeProtocol conformance; "override" from SomeSuperClass
    required override init() {
        // initializer implementation goes here
    }
}
```

### Failable Initializer Requirements ì‹¤íŒ¨í•  ìˆ˜ ìžˆëŠ” ì´ˆê¸°í™” ìš”êµ¬

í”„ë¡œí† ì½œì—ì„œë„ `init?`ì„ ì‚¬ìš©í•˜ì—¬ Failable Initializerë¥¼ êµ¬í˜„í•  ìˆ˜ ìžˆë‹¤.

```swift
protocol SomeProtocol {
    init?()
}

// í”„ë¡œí† ì½œì´ failable initializerë¥¼ ìš”êµ¬í•´ë„ init()ìœ¼ë¡œ êµ¬í˜„í•´ë„ ëœë‹¤
class Some: SomeClass {
  init() {
  }

//í•˜ì§€ë§Œ í”„ë¡œí† ì½œì´ init()ì„ ìš”êµ¬í•˜ë©´ init?()ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ì—†ë‹¤
```

## Protocols as Types

í”„ë¡œí† ì½œì€ ì‹¤ì œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì§€ëŠ” ì•Šì§€ë§Œ í•˜ë‚˜ì˜ ë…ë¦½ì ì¸ íƒ€ìž…ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” ì¼ê¸‰ì‹œë¯¼ì´ë‹¤.

ë”°ë¼ì„œ ì•„ëž˜ì˜ 3ê°€ì§€ê°€ ê°€ëŠ¥í•˜ë‹¤

- í•¨ìˆ˜ ë˜ëŠ” ì´ë‹ˆì…œë¼ì´ì €ì˜ ë§¤ê°œë³€ìˆ˜ Type or Return Type
- ìƒìˆ˜, ë³€ìˆ˜ í”„ë¡œí¼í‹°ì˜ Type
- Array, Dictionary ë˜ëŠ” ê¸°íƒ€ ì»¨í…Œì´ë„ˆ í•­ëª© Type

```swift
class Dice {
    let sides: Int
    // RandomNumberGenerator í”„ë¡œí† ì½œì„ íƒ€ìž…ìœ¼ë¡œ ì‚¬ìš©
    let generator: RandomNumberGenerator
    init(sides: Int, generator: RandomNumberGenerator) {
        self.sides = sides
        self.generator = generator
    }
    func roll() -> Int {
        return Int(generator.random() * Double(sides)) + 1
    }
}

var d6 = Dice(sides: 6, generator: LinearCongruentialGenerator())
for _ in 1...5 {
    print("Random dice roll is \(d6.roll())")
}
// Random dice roll is 3
// Random dice roll is 5
// Random dice roll is 4
// Random dice roll is 5
// Random dice roll is 4
```

## Reference

[Apple Docs - Protocols](https://docs.swift.org/swift-book/LanguageGuide/Protocols.html)
